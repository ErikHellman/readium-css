/* Readium CSS 
   Font Family pref

   A submodule managing font-family for user settings
   Part of “User Overrides” class – “readium-font-on” flag required.

   Repo: https://github.com/readium/readium-css */

/* [style*="--USER__fontOverride"] can be used to increase specificity but performance hit */
:root[style*="readium-font-on"][style*="--USER__fontFamily"] {
  font-family: var(--USER__fontFamily) !important;
}

:root[style*="readium-font-on"][style*="--USER__fontFamily"] body, :root[style*="font-family"] body,
:root[style*="readium-font-on"][style*="--USER__fontFamily"] p, :root[style*="font-family"] p,
:root[style*="readium-font-on"][style*="--USER__fontFamily"] li, :root[style*="font-family"] li,
:root[style*="readium-font-on"][style*="--USER__fontFamily"] div, :root[style*="font-family"] div,
:root[style*="readium-font-on"][style*="--USER__fontFamily"] dt, :root[style*="font-family"] dt,
:root[style*="readium-font-on"][style*="--USER__fontFamily"] dd, :root[style*="font-family"] dd {
  font-family: inherit !important;
}

:root[style*="readium-font-on"][style*="--USER__fontFamily"] i:not([lang]), :root[style*="font-family"] i:not([lang]),
:root[style*="readium-font-on"][style*="--USER__fontFamily"] i:not([xml\:lang]), :root[style*="font-family"] i:not([xml\:lang]),
:root[style*="readium-font-on"][style*="--USER__fontFamily"] em:not([lang]), :root[style*="font-family"] em:not([lang]),
:root[style*="readium-font-on"][style*="--USER__fontFamily"] em:not([xml\:lang]), :root[style*="font-family"] em:not([xml\:lang]),
:root[style*="readium-font-on"][style*="--USER__fontFamily"] cite:not([lang]), :root[style*="font-family"] cite:not([lang]),
:root[style*="readium-font-on"][style*="--USER__fontFamily"] cite:not([xml\:lang]), :root[style*="font-family"] cite:not([xml\:lang]),
:root[style*="readium-font-on"][style*="--USER__fontFamily"] b:not([lang]), :root[style*="font-family"] b:not([lang]),
:root[style*="readium-font-on"][style*="--USER__fontFamily"] b:not([xml\:lang]), :root[style*="font-family"] b:not([xml\:lang]),
:root[style*="readium-font-on"][style*="--USER__fontFamily"] strong:not([lang]), :root[style*="font-family"] strong:not([lang]),
:root[style*="readium-font-on"][style*="--USER__fontFamily"] strong:not([xml\:lang]), :root[style*="font-family"] strong:not([xml\:lang]),
:root[style*="readium-font-on"][style*="--USER__fontFamily"] span:not([lang]), :root[style*="font-family"] span:not([lang]),
:root[style*="readium-font-on"][style*="--USER__fontFamily"] span:not([xml\:lang]), :root[style*="font-family"] span:not([xml\:lang]) {
  font-family: inherit !important;
}

/* A11y fonts */
/* For AccessibleDfa, we need to normalize font-weight and font-style since only the normal style is available */

:root[style*="readium-font-on"][style*="AccessibleDfa"] {
  /* We won’t use the variable there since we need fallbacks for missing characters */
  font-family: "AccessibleDFA", Verdana, Tahoma, "Trebuchet MS", sans-serif !important;
}

/* Maybe users want a setting to normalize any font offered so there is a "--USER__a11yNormalize: readium-a11y-on" flag for it */

:root[style*="readium-font-on"][style*="AccessibleDfa"],
:root[style*="readium-font-on"][style*="readium-a11y-on"] {
  font-weight: normal !important;
  font-style: normal !important;
}

/* Targeting everything except code. Note that Open Dyslexic has a monospaced font for code */
:root[style*="readium-font-on"][style*="AccessibleDfa"] *:not(code):not(var):not(kbd):not(samp),
:root[style*="readium-font-on"][style*="readium-a11y-on"] *:not(code):not(var):not(kbd):not(samp) {
  font-family: inherit !important;
  font-weight: inherit !important;
  font-style: inherit !important;
}

/* Normalizing text-decoration, subs and sups */
:root[style*="readium-font-on"][style*="AccessibleDfa"] *,
:root[style*="readium-font-on"][style*="readium-a11y-on"] * {
  text-decoration: none !important;  
  font-variant-position: normal !important;
  font-variant-numeric: normal !important;
}

:root[style*="readium-font-on"][style*="AccessibleDfa"] sup,
:root[style*="readium-font-on"][style*="readium-a11y-on"] sup,
:root[style*="readium-font-on"][style*="AccessibleDfa"] sub,
:root[style*="readium-font-on"][style*="readium-a11y-on"] sub {
  font-size: 1rem !important;
  vertical-align: baseline !important;
}